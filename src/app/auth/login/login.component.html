<div class="login-page">
  <!-- Background decorativo -->
  <div class="background-decoration">
    <div class="circle circle-1"></div>
    <div class="circle circle-2"></div>
    <div class="circle circle-3"></div>
  </div>

  <div class="login-container">
    <!-- Logo e Título -->
    <div class="login-header">
      <div class="logo-container">
        <mat-icon class="logo-icon">school</mat-icon>
      </div>
      <h1 class="app-title">Portifólium</h1>
      <p class="app-subtitle">Sistema de Gestão Acadêmica</p>
    </div>

    <!-- Mensagem de Sessão Expirada -->
    <div *ngIf="sessionExpiredMessage" class="session-expired-alert">
      <mat-icon>schedule</mat-icon>
      <div>
        <strong>Sessão Expirada</strong>
        <p>{{ sessionExpiredMessage }}</p>
      </div>
    </div>

    <!-- Card de Login -->
    <mat-card class="login-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon class="title-icon">lock_person</mat-icon>
          Acesse sua conta
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
          <!-- Campo E-mail -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>E-mail</mat-label>
            <mat-icon matPrefix>email</mat-icon>
            <input
              matInput
              type="email"
              formControlName="username"
              placeholder="seu@email.com"
              autocomplete="username">
            <mat-error *ngIf="loginForm.get('username')?.hasError('required')">
              E-mail é obrigatório
            </mat-error>
          </mat-form-field>

          <!-- Campo Senha -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Senha</mat-label>
            <mat-icon matPrefix>lock</mat-icon>
            <input
              matInput
              [type]="hidePassword ? 'password' : 'text'"
              formControlName="password"
              placeholder="••••••••"
              autocomplete="current-password">
            <button
              mat-icon-button
              matSuffix
              type="button"
              (click)="hidePassword = !hidePassword"
              [attr.aria-label]="'Exibir senha'"
              [attr.aria-pressed]="!hidePassword">
              <mat-icon>{{ hidePassword ? 'visibility' : 'visibility_off' }}</mat-icon>
            </button>
            <mat-error *ngIf="loginForm.get('password')?.hasError('required')">
              Senha é obrigatória
            </mat-error>
          </mat-form-field>

          <!-- Mensagem de Erro -->
          <div *ngIf="errorMessage" class="error-message">
            <mat-icon>error</mat-icon>
            <span>{{ errorMessage }}</span>
          </div>

          <!-- Botão de Login -->
          <button
            mat-raised-button
            color="primary"
            type="submit"
            class="login-button"
            [disabled]="loginForm.invalid || isLoading">
            <mat-spinner
              *ngIf="isLoading"
              diameter="20"
              class="button-spinner">
            </mat-spinner>
            <span *ngIf="!isLoading">
              <mat-icon>login</mat-icon>
              Entrar
            </span>
            <span *ngIf="isLoading">Entrando...</span>
          </button>
        </form>
      </mat-card-content>
    </mat-card>

    <!-- Footer -->
    <div class="login-footer">
      <p class="copyright">
        <mat-icon class="footer-icon">copyright</mat-icon>
        {{ currentYear }} Portifólium - Sistema de Gestão Acadêmica
      </p>
    </div>
  </div>
</div>
