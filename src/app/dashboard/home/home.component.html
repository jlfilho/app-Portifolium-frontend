<!-- Toolbar Principal -->
<mat-toolbar class="header">
  <!-- Botão Menu -->
  <button
    mat-icon-button
    class="menu-button"
    (click)="toggleSidebar()"
    matTooltip="Menu"
    matTooltipPosition="right">
    <mat-icon>{{ isCollapsed ? 'menu_open' : 'menu' }}</mat-icon>
  </button>

  <!-- Logo e Nome -->
  <div class="header-brand">
    <div class="header-logo"></div>
    <span class="header-title">
      <strong>Portifólium</strong>
      <span class="header-subtitle">Sistema de Gestão</span>
    </span>
  </div>

  <!-- Spacer -->
  <span class="spacer"></span>

  <!-- Informações do Usuário -->
  <div class="user-info">
    <button
      mat-icon-button
      class="notification-button"
      matTooltip="Notificações"
      matBadge="3"
      matBadgeColor="warn"
      matBadgeSize="small">
      <mat-icon>notifications</mat-icon>
    </button>

    <!-- Menu do Usuário -->
    <button
      mat-button
      class="user-menu-button"
      [matMenuTriggerFor]="menu">
      <mat-icon class="user-avatar">account_circle</mat-icon>
      <span class="user-name">{{ userName }}</span>
      <mat-icon class="dropdown-icon">expand_more</mat-icon>
    </button>
  </div>

  <!-- Menu Dropdown -->
  <mat-menu #menu="matMenu" class="user-dropdown">
    <div class="menu-header">
      <mat-icon class="menu-avatar">account_circle</mat-icon>
      <div class="menu-user-info">
        <strong>{{ userName }}</strong>
        <small>{{ userEmail }}</small>
        <span class="user-role">{{ getUserRole() }}</span>
      </div>
    </div>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="testDialog()">
      <mat-icon>bug_report</mat-icon>
      <span>Teste Diálogo</span>
    </button>
    <button mat-menu-item (click)="goToProfile()">
      <mat-icon>person</mat-icon>
      <span>Meu Perfil</span>
    </button>
    <button mat-menu-item (click)="goToSettings()">
      <mat-icon>settings</mat-icon>
      <span>Configurações</span>
    </button>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="logout()" class="logout-item">
      <mat-icon>logout</mat-icon>
      <span>Sair</span>
    </button>
  </mat-menu>
</mat-toolbar>

<!-- Container Principal -->
<mat-sidenav-container class="dashboard-container">
  <!-- Barra Lateral -->
  <mat-sidenav
    #sidenav
    mode="side"
    [opened]="!isCollapsed"
    class="sidenav"
    [class.collapsed]="isCollapsed">

    <!-- Lista de Navegação -->
    <mat-nav-list class="nav-list">
      <a
        mat-list-item
        routerLink="/dashboard"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{exact: true}"
        matRipple
        class="nav-item">
        <mat-icon class="nav-icon">dashboard</mat-icon>
        <span class="nav-text" *ngIf="!isCollapsed">Dashboard</span>
        <div class="active-indicator" *ngIf="!isCollapsed"></div>
      </a>

      <a
        mat-list-item
        routerLink="/cursos"
        routerLinkActive="active-link"
        matRipple
        class="nav-item">
        <mat-icon class="nav-icon">school</mat-icon>
        <span class="nav-text" *ngIf="!isCollapsed">Cursos</span>
        <div class="active-indicator" *ngIf="!isCollapsed"></div>
      </a>

      <a
        mat-list-item
        routerLink="/categorias"
        routerLinkActive="active-link"
        matRipple
        class="nav-item"
        *ngIf="isAdmin()">
        <mat-icon class="nav-icon">category</mat-icon>
        <span class="nav-text" *ngIf="!isCollapsed">Tipos de Atividades</span>
        <div class="active-indicator" *ngIf="!isCollapsed"></div>
      </a>

      <a
        mat-list-item
        routerLink="/tipos-curso"
        routerLinkActive="active-link"
        matRipple
        class="nav-item"
        *ngIf="isAdmin()">
        <mat-icon class="nav-icon">style</mat-icon>
        <span class="nav-text" *ngIf="!isCollapsed">Tipos de Cursos</span>
        <div class="active-indicator" *ngIf="!isCollapsed"></div>
      </a>

      <a
        mat-list-item
        routerLink="/usuarios"
        routerLinkActive="active-link"
        matRipple
        class="nav-item"
        *ngIf="isAdmin()">
        <mat-icon class="nav-icon">group</mat-icon>
        <span class="nav-text" *ngIf="!isCollapsed">Usuários</span>
        <div class="active-indicator" *ngIf="!isCollapsed"></div>
      </a>

      <mat-divider class="nav-divider"></mat-divider>

      <a
        mat-list-item
        routerLink="/configuracoes"
        routerLinkActive="active-link"
        matRipple
        class="nav-item">
        <mat-icon class="nav-icon">settings</mat-icon>
        <span class="nav-text" *ngIf="!isCollapsed">Configurações</span>
        <div class="active-indicator" *ngIf="!isCollapsed"></div>
      </a>
    </mat-nav-list>

    <!-- Footer da Sidebar -->
    <div class="sidebar-footer" *ngIf="!isCollapsed">
      <div class="version-info">
        <small>Versão 1.0.0</small>
      </div>
    </div>
  </mat-sidenav>

  <!-- Conteúdo Principal -->
  <mat-sidenav-content class="main-content">
    <div class="content">
      <router-outlet />
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
