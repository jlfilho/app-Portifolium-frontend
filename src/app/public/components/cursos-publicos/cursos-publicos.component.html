<div class="page-container">
  <!-- Hero Section -->
  <div class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">
        <mat-icon class="hero-icon">school</mat-icon>
        Nossos Cursos
      </h1>
      <p class="hero-subtitle">Veja o que nossos estudantes e professores têm desenvolvido em aulas, projetos e eventos acadêmicos.</p>
    </div>
  </div>

  <!-- Search Section -->
  <div class="search-section">
    <div class="filters-card">
      <div class="filters-grid">
        <mat-form-field appearance="outline" class="search-field">
        <mat-label>Buscar cursos</mat-label>
        <input
          matInput
          [(ngModel)]="searchTerm"
          (ngModelChange)="onSearchChange($event)"
          autocomplete="off">
        <mat-icon matPrefix>search</mat-icon>
        <button
          mat-icon-button
          matSuffix
          *ngIf="searchTerm"
          (click)="clearSearchText()"
          matTooltip="Limpar busca">
          <mat-icon>close</mat-icon>
        </button>
        </mat-form-field>

        <mat-form-field appearance="outline" class="unidade-field">
          <mat-label>Unidade Acadêmica</mat-label>
          <mat-icon matPrefix>apartment</mat-icon>
          <mat-select
            [disabled]="isLoadingUnidades"
            [value]="filtroUnidadeId"
            (selectionChange)="onUnidadeChange($event.value)">
            <mat-option [value]="null">Todas as unidades</mat-option>
            <mat-option *ngFor="let unidade of unidadesAcademicas" [value]="unidade.id">
              {{ unidade.nome }}
            </mat-option>
          </mat-select>
          <mat-progress-spinner
            *ngIf="isLoadingUnidades"
            matSuffix
            diameter="20"
            mode="indeterminate">
          </mat-progress-spinner>
        </mat-form-field>
      </div>
      <div class="filters-footer">
        <div class="results-info" *ngIf="!isLoading && totalElements > 0">
          <mat-icon>info</mat-icon>
          <span>Encontrados <strong>{{ totalElements }}</strong> curso(s)</span>
          <span *ngIf="searchTerm" class="search-highlight">com "{{ searchTerm }}"</span>
          <span *ngIf="filtroUnidadeId" class="search-highlight">na unidade selecionada</span>
        </div>

        <div class="filters-illustration">
          <mat-icon>tune</mat-icon>
        </div>

        <button
          mat-stroked-button
          class="clear-button"
          (click)="clearAllFilters()"
          *ngIf="hasActiveFilters()"
          matTooltip="Limpar filtros">
          <mat-icon>filter_alt_off</mat-icon>
          Limpar filtros
        </button>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div class="loading-container" *ngIf="isLoading">
    <mat-progress-spinner mode="indeterminate" diameter="60"></mat-progress-spinner>
    <p>Carregando cursos...</p>
  </div>

  <!-- Cursos Grid -->
  <div class="cursos-grid" *ngIf="!isLoading && cursos.length > 0">
    <mat-card
      *ngFor="let curso of cursos"
      class="curso-card"
      matRipple
      (click)="viewCurso(curso)">
      <!-- Card Header com Imagem -->
      <div class="card-header-image" [class.has-image]="curso.fotoCapa || curso.imagemCapa">
        <!-- Imagem de capa -->
        <img
          [src]="getCursoCardImage(curso)"
          [alt]="'Capa do curso ' + curso.nome"
          class="curso-image"
          (error)="onImageError($event)">

        <!-- Overlay com título -->
        <div class="header-overlay">
          <h3 class="curso-nome">{{ curso.nome }}</h3>
          <mat-chip-set *ngIf="getTipoNome(curso)" class="tipo-chip-set">
            <mat-chip class="chip-highlight">{{ getTipoNome(curso) }}</mat-chip>
          </mat-chip-set>
        </div>
      </div>

      <!-- Card Content -->
      <mat-card-content class="card-content">
        <p class="curso-descricao" *ngIf="curso.descricao">
          {{ curso.descricao }}
        </p>
        <p class="curso-descricao empty" *ngIf="!curso.descricao">
          Curso sem descrição disponível
        </p>

        <!-- Footer Info -->
        <div class="card-footer">
            <span class="curso-info"></span>
          <button mat-icon-button class="btn-view" (click)="viewCurso(curso); $event.stopPropagation()">
            <mat-icon>arrow_forward</mat-icon>
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading && cursos.length === 0">
    <mat-icon class="empty-icon">school_outlined</mat-icon>
    <h3>Nenhum curso encontrado</h3>
    <p *ngIf="searchTerm">
      Não encontramos cursos com "<strong>{{ searchTerm }}</strong>"
    </p>
    <p *ngIf="!searchTerm">
      No momento não há cursos disponíveis
    </p>
    <button
      mat-raised-button
      color="primary"
      *ngIf="searchTerm"
      (click)="clearSearchText()">
      <mat-icon>clear</mat-icon>
      Limpar Busca
    </button>
  </div>

  <!-- Paginação -->
  <mat-paginator
    *ngIf="!isLoading && totalElements > 0"
    [length]="totalElements"
    [pageSize]="pageSize"
    [pageIndex]="pageIndex"
    [pageSizeOptions]="pageSizeOptions"
    (page)="onPageChange($event)"
    showFirstLastButtons
    class="paginator">
  </mat-paginator>
</div>

